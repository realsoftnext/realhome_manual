# 약관 관리 시스템 매뉴얼 (관리자용)

## 📋 목차
1. [개요](#개요)
2. [약관 관리 페이지 접근](#약관-관리-페이지-접근)
3. [약관 조회 및 검색](#약관-조회-및-검색)
4. [신규 약관 생성](#신규-약관-생성)
5. [약관 편집](#약관-편집)
6. [약관 삭제](#약관-삭제)
7. [약관 버전 관리](#약관-버전-관리)
8. [사용자 동의 이력 확인](#사용자-동의-이력-확인)
9. [자주 하는 질문](#자주-하는-질문)

---

## 개요

약관 관리 시스템은 회사의 모든 약관(직원용, 회원용)을 통합하여 관리하는 기능입니다.

### 관리 대상 약관 (6가지)

| 구분 | 약관 명 | 코드 | 용도 |
|------|--------|------|------|
| 직원용 | 직원 이용약관 | STAFF_TERMS | 직원 회원가입 시 필수 동의 |
| 직원용 | 직원 기밀유지동의서 | STAFF_NDA | 직원 기밀정보 보호 서약 |
| 회원용 | 회원 이용약관 | MEMBER_TERMS | 회원 가입/로그인 시 필수 동의 |
| 회원용 | 개인정보 처리방침 | MEMBER_PRIVACY | 개인정보 보호 정책 |
| 회원용 | 제3자정보제공약관 | THIRD_PARTY_INFO | 정보 공유 안내 |
| 회원용 | 광고/마케팅 수신동의 | MARKETING_CONSENT | 마케팅 수신 동의 |

### 핵심 기능

- ✅ 약관 버전 관리 (1.0, 1.1, 2.0 등)
- ✅ Markdown 형식 약관 작성
- ✅ 약관 변경사항 비교 (Diff)
- ✅ 사용자 동의 이력 추적
- ✅ 타입별 활성 약관 관리

---

## 약관 관리 페이지 접근

### 1단계: 로그인
1. 관리자 계정으로 로그인
2. 예시: `admin@realhome.kr` / 비밀번호

### 2단계: 메뉴 이동
1. 좌측 메뉴 **설정(⚙️)** 클릭
2. **약관 관리** 메뉴 선택
3. 약관 목록 페이지로 이동

---

## 약관 조회 및 검색

### 페이지 구성

약관 관리 페이지는 다음과 같이 구성됩니다:

![약관 관리 페이지](/images/terms/1.png)

### 필터링

페이지 상단의 버튼으로 약관을 필터링합니다:

| 필터 | 설명 |
|------|------|
| **전체** | 모든 약관 표시 |
| **직원** | 직원용 약관만 표시 (STAFF_TERMS, STAFF_NDA) |
| **회원** | 회원용 약관만 표시 (MEMBER_*, THIRD_PARTY_*, MARKETING_*) |

### 약관 카드 정보

각 약관 카드에는 다음 정보가 표시됩니다:

- **제목**: 약관의 이름
- **버전**: 현재 버전 번호 (예: 1.0, 1.1, 2.0)
- **상태**: 활성(초록) 또는 비활성(회색)
- **시행일**: 약관이 실제 적용되는 날짜
- **요약**: 약관의 핵심 내용 (50자 이내)
- **작성자/생성일**: 언제 누가 생성했는지
- **동의자**: 해당 약관에 동의한 사용자 수

---

## 신규 약관 생성

### 새 약관을 추가하려면

1. 페이지 우측 상단의 **+ 새 약관 추가** 버튼 클릭
2. 약관 작성 페이지로 이동

### 약관 작성 화면

#### 기본 정보 입력

| 항목 | 설명 | 필수 | 예시 |
|------|------|------|------|
| **약관 타입** | 직원/회원 약관 선택 | ✅ | 직원 이용약관 |
| **제목** | 약관의 명칭 | ✅ | 직원 이용약관 v2.0 |
| **요약** | 약관의 핵심 내용 (50자 이내) | ✅ | 직원이 서비스 이용 시 지켜야 할 사항들 |
| **시행일** | 약관이 적용되는 날짜 | ✅ | 2025년 1월 15일 |

#### 약관 내용 작성

**Markdown 형식을 사용합니다:**

```markdown
# 약관 제목

## 제1조 (목적)
본 약관의 목적은 ...

## 제2조 (정의)
1. "회사"란 ...
2. "서비스"란 ...

## 제3조 (이용 조건)
본 약관에 따라 ...

---

**시행일: 2025년 1월 15일**
```

**지원하는 Markdown 문법:**

| 문법 | 예시 | 결과 |
|------|------|------|
| 제목 1 | `# 제목` | 매우 큰 글자 |
| 제목 2 | `## 제목` | 큰 글자 |
| 제목 3 | `### 제목` | 중간 글자 |
| 굵은 글 | `**굵은 글**` | **굵은 글** |
| 기울임 | `*기울임*` | *기울임* |
| 번호 목록 | `1. 항목\n2. 항목` | 1. 항목<br/>2. 항목 |
| 글머리 | `- 항목\n- 항목` | • 항목<br/>• 항목 |
| 링크 | `[텍스트](URL)` | [링크](http://) |

#### 기존 약관 복사하기

새 버전을 만들 때 기존 내용을 복사할 수 있습니다:

1. 약관 타입 선택
2. "이전 버전에서 복사" 버튼 클릭
3. 이전 버전의 내용이 자동으로 에디터에 로드됨
4. 필요한 부분만 수정
5. 저장

### 저장 및 활성화

**저장 버튼 클릭:**
- 새 약관이 생성됨
- 같은 타입의 이전 버전은 자동으로 비활성화됨
- 새 약관이 자동으로 활성화됨

---

## 약관 편집

### 기존 약관 수정하기

1. 약관 목록에서 수정할 약관의 **상세보기** 또는 **수정** 버튼 클릭
2. 약관 상세 페이지에서 **수정하기** 버튼 클릭
3. 약관 편집 페이지로 이동

### 편집 화면

**주의: 기존 버전을 직접 수정할 수 없습니다!**

대신 다음과 같이 진행합니다:

1. **새 버전 생성**: 새 약관을 추가하는 방식으로 진행
2. **버전 번호 설정**:
   - 소수점 변경: 1.0 → 1.1 (내용 일부 수정)
   - 주요 변경: 1.x → 2.0 (내용 대폭 변경)
3. **저장**: 새 버전이 활성화되고 이전 버전은 비활성화됨

### 변경사항 비교 (Diff 보기)

새 버전 생성 후 이전 버전과의 차이를 확인할 수 있습니다:

1. 상세 페이지에서 **변경사항 비교** 탭 클릭
2. 이전 버전과 현재 버전의 차이 확인:
   - 🟢 **초록색**: 추가된 부분
   - 🔴 **빨강색**: 삭제된 부분
   - ⚪ **흰색**: 변경되지 않은 부분

---

## 약관 삭제

### 삭제 가능 조건

약관을 삭제하려면 다음 조건을 **모두** 만족해야 합니다:

| 조건 | 설명 | 상태 |
|------|------|------|
| 다른 활성 약관 존재 | 같은 타입의 다른 약관이 있어야 함 | ✅ 필수 |
| 동의 이력 없음 | 아무도 동의하지 않은 약관만 삭제 가능 | ✅ 필수 |

### 삭제 불가 경우

**❌ 마지막 약관인 경우:**
```
직원 이용약관이 1개만 존재할 때 삭제 시도
→ "삭제할 수 없습니다. 각 타입마다 최소 1개의 약관이 필요합니다."
```

**해결 방법:** 새 버전을 생성한 후 기존 버전 삭제

**❌ 동의자가 있는 경우:**
```
50명이 동의한 약관 삭제 시도
→ "삭제할 수 없습니다. 50명의 동의 이력이 있습니다.
   법적 기록 보존을 위해 보관됩니다."
```

**해결 방법:** 불가능 (법적 증거로 영구 보관)

### 삭제 방법

1. 약관 목록에서 삭제할 약관 찾기
2. **삭제** 버튼 클릭
3. 확인 팝업에서 "삭제"를 다시 클릭
4. 삭제 완료

---

## 약관 버전 관리

### 버전 규칙

**버전은 주.소 형식으로 표기합니다:** (예: 1.0, 1.1, 2.0)

| 변경 유형 | 이전 버전 | 새 버전 | 예시 |
|----------|---------|--------|------|
| 소수점 수정 | 1.0 | 1.1 | 오타 수정, 한두 문장 변경 |
| 계속 소수점 수정 | 1.1 | 1.2 | 조건 명확화, 용어 수정 |
| 주요 변경 | 1.x | 2.0 | 새로운 조항 추가, 구조 변경 |

### 활성/비활성 약관

**각 타입별로 1개의 활성 약관만 존재합니다:**

```
직원 이용약관
├─ v1.0 (비활성) - 이전 버전
├─ v1.1 (활성) ⭐ ← 현재 사용 중
└─ v2.0 (비활성) - 아직 미사용

회원 이용약관
├─ v1.0 (비활성) - 2024년 버전
└─ v2.0 (활성) ⭐ ← 현재 사용 중
```

---

## 사용자 동의 이력 확인

### 직원의 약관 동의 이력

**경로:** 직원 관리 → 직원 상세 → 약관 동의 이력 탭

**확인 가능한 정보:**

| 정보 | 설명 |
|------|------|
| 약관명 | 동의한 약관의 이름 |
| 버전 | 동의했던 약관의 버전 |
| 동의 상태 | 동의완료 또는 철회함 |
| 동의일시 | 정확한 동의 시각 (예: 2025-01-15 14:30:45) |
| IP 주소 | 동의할 당시의 네트워크 IP |
| User-Agent | 브라우저 정보 (디바이스, OS, 브라우저 종류) |

**예시:**

```
약관: 직원 이용약관 v1.0
상태: ✅ 동의완료
동의일: 2025-01-10 09:15:22
IP: 203.0.113.42
User-Agent: Mozilla/5.0... (Chrome on Windows)
```

### 회원의 약관 동의 이력

**경로:** 회원 관리 → 회원 상세 → 약관 동의 이력 탭

직원 이력과 동일한 정보를 확인할 수 있습니다.

### 동의 통계

약관 상세 페이지 하단에서 통계 확인:

```
총 동의자: 245명
미동의 사용자: 12명
동의율: 95.3%
```

---

## 자주 하는 질문

### Q1. 약관을 긴급하게 수정해야 하는데, 기존 버전을 직접 수정할 수 없나요?

**A:** 맞습니다. 법적 증거 자료로 기존 버전을 보존해야 합니다.

**해결 방법:**
1. 새로운 버전을 빠르게 생성
2. 시행일을 "오늘"로 설정
3. 기존 약관과 다른 내용 추가
4. 저장하면 새 버전이 즉시 활성화됨

---

### Q2. 약관 변경 후 기존 사용자들에게는 어떻게 공지되나요?

**A:** 자동으로 처리됩니다:

- **직원**: 다음 로그인 시 약관 동의 모달 자동 표시
- **회원**: 다음 로그인 시 약관 변경 알림 표시
- 모든 약관에 동의한 후에만 서비스 이용 가능

---

### Q3. 이미 동의한 약관을 삭제하려고 하면?

**A:** 삭제되지 않습니다.

```
"이 약관에는 245명의 동의 이력이 있습니다.
 법적 기록 보존을 위해 영구 보관됩니다."
```

**이유:** 추후 분쟁이나 법적 문제 발생 시 증거로 사용

---

### Q4. 약관 타입별로 최소 몇 개는 있어야 하나요?

**A:** 각 타입마다 **최소 1개**씩 있어야 합니다.

**타입별 필수 약관:**

- **STAFF_TERMS** (직원 이용약관): 최소 1개
- **STAFF_NDA** (직원 NDA): 최소 1개
- **MEMBER_TERMS** (회원 약관): 최소 1개
- **MEMBER_PRIVACY** (개인정보처리방침): 최소 1개
- **THIRD_PARTY_INFO** (제3자정보제공약관): 최소 1개
- **MARKETING_CONSENT** (마케팅 수신동의): 최소 1개

---

### Q5. 비활성 약관과 활성 약관의 차이는?

**A:**

| 구분 | 활성 약관 | 비활성 약관 |
|------|---------|----------|
| 사용 여부 | ✅ 현재 사용 중 | ❌ 미사용 |
| 신규 사용자 | 신규 사용자가 동의해야 함 | 미표시 |
| 기존 사용자 | 버전 변경 시 재동의 | 그대로 유지 |
| 삭제 | 불가 (다른 활성 약관 있을 때는 가능) | 가능 (동의 이력 없을 시) |

---

### Q6. 약관 변경사항을 사용자에게 어떻게 알릴 수 있나요?

**A:** 시스템에서 자동으로 처리되지만, 추가 공지는 별도 진행 가능:

1. **이메일 발송**: 마케팅 수신동의 회원에게 안내 메일
2. **공지사항**: 공지사항 게시판에 약관 변경 안내
3. **SMS 발송**: 필요시 중요 약관 변경 안내 문자

---

### Q7. 약관 버전을 1.0에서 바로 3.0으로 올릴 수 있나요?

**A:** 기술적으로는 가능하지만, 권장하지 않습니다.

**권장 방식:**
- 1.0 → 1.1 → 1.2 → 2.0 → 2.1 → 3.0

**이유:** 변경 이력의 명확성과 버전 추적 용이

---

### Q8. 마케팅 수신동의 약관은 다른 약관과 다른가요?

**A:** 네, 다릅니다:

| 구분 | 필수 약관 | 마케팅 동의 |
|------|---------|----------|
| 필수 여부 | ✅ 필수 동의 | ❌ 선택 동의 |
| 미동의 시 | 서비스 이용 불가 | 서비스 이용 가능 |
| 용도 | 서비스 이용 동의 | 광고/마케팅 수신 동의 |
| 취소 가능 | ❌ 불가 | ✅ 가능 (로그인 후 설정) |

---

## 📞 기술 지원

약관 관리 시스템 관련 문제 발생 시:

- **이메일**: support@realhome.kr
- **전화**: 02-XXXX-XXXX
- **카카오톡**: @realhome

---

**매뉴얼 버전**: 1.0  
**최종 수정**: 2025년 11월 13일  
**작성자**: 리얼소프트 개발팀
