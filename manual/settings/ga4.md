# Google Analytics 4 (GA4) 연동

홈페이지 방문자 통계를 실시간으로 확인하고 대시보드에서 한눈에 파악할 수 있습니다.

## 📋 목차
1. [GA4란?](#ga4란)
2. [연동 준비물](#연동-준비물)
3. [STEP 0: GA4 속성 만들기](#step-0-ga4-속성-만들기)
4. [STEP 1: 서비스 계정 만들기](#step-1-서비스-계정-만들기)
5. [STEP 2: GA4 권한 부여](#step-2-ga4-권한-부여)
6. [STEP 3: GA4 ID 확인](#step-3-ga4-id-확인)
7. [STEP 4: 시스템에 설정](#step-4-시스템에-설정)
8. [대시보드에서 확인하기](#대시보드에서-확인하기)
9. [문제 해결](#문제-해결)
10. [FAQ](#faq)

---

## GA4란?

**Google Analytics 4 (GA4)**는 구글에서 제공하는 무료 웹사이트 분석 도구입니다.

### 주요 기능
- 📊 **실시간 방문자 수**: 지금 몇 명이 홈페이지를 보고 있는지
- 📈 **일별/주별/월별 통계**: 기간별 방문자 추이
- 🌍 **방문 경로**: 어디서 유입되었는지 (검색, SNS, 직접 입력 등)
- 📱 **디바이스 분석**: PC, 모바일, 태블릿 비율
- ⏱️ **체류 시간**: 방문자가 얼마나 오래 머물렀는지

### 왜 필요한가요?
```
GA4 연동 전: 매물을 올렸는데 사람들이 보는지 안 보는지 모름
GA4 연동 후: 오늘 127명이 방문, 가장 인기 있는 페이지는 "강남 아파트"
```

---

## 연동 준비물

### 필수 항목
- ✅ **Google 계정**: Gmail 계정 (무료)
- ✅ **관리자 권한**: 시스템 설정 페이지 접근 가능
- ✅ **약 30분**: 처음 설정 시 소요 시간

### 이미 GA4를 사용 중이라면?
- ✅ STEP 0 건너뛰기 → STEP 1부터 시작
- ✅ Property ID와 Measurement ID만 확인하면 됨

---

## STEP 0: GA4 속성 만들기

> **💡 이미 GA4 속성이 있다면 이 단계는 건너뛰세요!**

{/* ga4_create_property.png */}

### GA4 속성이란?
홈페이지 하나당 하나의 GA4 속성이 필요합니다.

### 새 속성 만들기

1. **Google Analytics 접속**
   ```
   https://analytics.google.com/analytics/web/provision/#/provision
   ```

2. **계정 정보 입력**
   - 계정 이름: 회사명 또는 프로젝트명 (예: 리얼홈 부동산)
   - 데이터 공유 설정: 모두 체크 권장
   - **"다음"** 클릭

3. **속성 정보 입력**
   - 속성 이름: 웹사이트 이름 (예: 리얼홈 공식 홈페이지)
   - 보고 시간대: **대한민국** 선택
   - 통화: **대한민국 원 (₩)** 선택
   - **"다음"** 클릭

4. **비즈니스 정보 입력**
   - 업종: 부동산
   - 비즈니스 규모: 소규모
   - 사용 목적: 원하는 항목 선택
   - **"만들기"** 클릭

5. **데이터 스트림 만들기**
   - 플랫폼: **웹** 선택
   - 웹사이트 URL 입력: `https://your-website.com`
   - 스트림 이름: 웹사이트 이름
   - **"스트림 만들기"** 클릭

6. **완료!**
   - Property ID와 Measurement ID가 자동으로 생성됨
   - 나중에 확인하는 방법은 STEP 3 참고

---

## STEP 1: 서비스 계정 만들기

{/* ga4_service_account.png */}

### 서비스 계정이란?
시스템이 자동으로 GA4 데이터를 가져오기 위한 "로봇 계정"입니다.

### 1-1. Google Cloud 프로젝트 생성

1. **Google Cloud Console 접속**
   ```
   https://console.cloud.google.com
   ```

2. **새 프로젝트 만들기**
   - 상단 프로젝트 선택 드롭다운 클릭
   - **"새 프로젝트"** 클릭
   - 프로젝트 이름 입력: `GA4-Analytics`
   - **"만들기"** 클릭

3. **생성된 프로젝트 선택**
   - ⚠️ **중요**: 상단 드롭다운에서 방금 만든 프로젝트가 선택되어 있는지 확인!

### 1-2. Analytics Data API 활성화

1. **API 검색**
   - 상단 검색창에 `Analytics Data API` 입력
   - 검색 결과 클릭

2. **API 사용 설정**
   - **"사용 설정"** 버튼 클릭
   - 약 10초 대기

### 1-3. 서비스 계정 생성

1. **사용자 인증 정보 페이지 이동**
   - 좌측 메뉴 → **"API 및 서비스"** → **"사용자 인증 정보"**

2. **서비스 계정 만들기**
   - 상단 **"사용자 인증 정보 만들기"** 버튼 클릭
   - **"서비스 계정"** 선택

3. **서비스 계정 정보 입력**
   - 서비스 계정 이름: `analytics-reader`
   - 서비스 계정 ID: 자동 생성됨
   - **"만들기 및 계속"** 클릭

4. **역할 설정 (건너뛰기)**
   - 역할 선택 화면에서 아무것도 선택하지 말고
   - **"완료"** 클릭

### 1-4. JSON 키 다운로드

1. **키 생성**
   - 생성된 서비스 계정 클릭
   - 상단 **"키"** 탭 선택
   - **"키 추가"** 버튼 → **"새 키 만들기"**

2. **키 유형 선택**
   - **JSON** 선택
   - **"만들기"** 클릭

3. **JSON 파일 자동 다운로드**
   - PC의 다운로드 폴더에 `.json` 파일 저장됨
   - 파일명 예시: `ga4-analytics-abc123.json`

> **⚠️ 중요**: 이 JSON 파일은 나중에 사용하니 **삭제하지 마세요**!

### 1-5. 서비스 계정 이메일 복사

{/* ga4_service_email.png */}

1. **이메일 확인**
   - 서비스 계정 목록에서 이메일 확인
   - 형식: `analytics-reader@프로젝트명.iam.gserviceaccount.com`

2. **이메일 복사**
   - 이메일 주소를 복사해두세요
   - 다음 단계(STEP 2)에서 사용

---

## STEP 2: GA4 권한 부여

{/* ga4_add_user.png */}

### 왜 필요한가요?
서비스 계정이 GA4 데이터를 읽을 수 있도록 권한을 부여해야 합니다.

### 권한 추가 방법

1. **Google Analytics 접속**
   ```
   https://analytics.google.com
   ```

2. **관리 페이지 이동**
   - 왼쪽 하단 **"관리"** (⚙️ 톱니바퀴 아이콘) 클릭

3. **속성 액세스 관리**
   - **가운데 열 (속성 열)**에서 **"속성 액세스 관리"** 클릭
   - ⚠️ 왼쪽 열(계정)이 아니라 **가운데 열(속성)** 입니다!

4. **사용자 추가**
   - 오른쪽 상단 파란색 **"+"** 버튼 클릭
   - **"사용자 추가"** 선택

5. **서비스 계정 이메일 입력**
   ```
   analytics-reader@프로젝트명.iam.gserviceaccount.com
   ```
   - STEP 1에서 복사한 서비스 계정 이메일 붙여넣기

6. **역할 선택**
   - 역할: **"뷰어"** (Viewer) 선택
   - ⚠️ **"관리자"가 아닌 "뷰어"**를 선택해야 합니다!
   - "데이터 제한 사항 없음" 체크박스는 **선택하지 않음**

7. **추가 완료**
   - 우측 상단 **"추가"** 버튼 클릭
   - 완료!

> **💡 TIP**: 권한 추가 후 5~10분 정도 기다려야 적용됩니다.

---

## STEP 3: GA4 ID 확인

{/* ga4_property_id.png */}

### 두 가지 ID가 필요합니다

1. **Property ID** (속성 ID) - 숫자만
2. **Measurement ID** (측정 ID) - G-로 시작

### Property ID 찾기

1. **Google Analytics 접속**
   ```
   https://analytics.google.com
   ```

2. **속성 설정 페이지**
   - 좌측 하단 **"관리"** 클릭
   - **가운데 열 (속성 열)**에서 **"속성 설정"** 클릭

3. **Property ID 확인**
   - 페이지 상단에 표시됨
   - 예시: `512483847`

> **⚠️ 주의**: "계정 ID"가 아닌 **"속성 ID"**입니다!

### Measurement ID 찾기

{/* ga4_measurement_id.png */}

1. **데이터 스트림 페이지**
   - 관리 → 가운데 열 → **"데이터 스트림"** 클릭

2. **웹 스트림 선택**
   - 웹사이트 URL 클릭

3. **Measurement ID 복사**
   - **"측정 ID"** (Measurement ID) 확인
   - 예시: `G-XXXXXXXXXX`
   - G-로 시작하는 ID를 복사

> **💡 TIP**: "스트림 ID"가 아닌 **"Measurement ID"**를 복사하세요!

---

## STEP 4: 시스템에 설정

{/* ga4_system_settings.png */}

### 설정 페이지 접속

1. **관리자 페이지 로그인**
2. 좌측 메뉴 → **"설정"** → **"GA4 연동"** 클릭

### 정보 입력

#### 1. Property ID
```
512483847
```
- STEP 3에서 확인한 숫자 입력

#### 2. Measurement ID
```
G-XXXXXXXXXX
```
- STEP 3에서 확인한 G-로 시작하는 ID 입력

#### 3. 서비스 계정 JSON 키
```json
{
  "type": "service_account",
  "project_id": "...",
  "private_key_id": "...",
  ...
}
```
- STEP 1에서 다운로드한 JSON 파일을 메모장으로 열기
- 전체 내용 복사 (Ctrl + A → Ctrl + C)
- 입력창에 붙여넣기 (Ctrl + V)

#### 4. 권한 확인
- ☑️ **"서비스 계정에 GA4 뷰어 권한을 부여했습니다"** 체크
- STEP 2를 완료했다면 체크

### 저장

- **"설정 저장"** 버튼 클릭
- 성공 메시지 확인

{/* ga4_settings_success.png */}

---

## 대시보드에서 확인하기

{/* ga4_dashboard.png */}

### 통계 확인

1. **대시보드 이동**
   - 좌측 메뉴 → **"대시보드"** 클릭

2. **GA4 통계 위젯**
   - 오늘 방문자 수
   - 어제 방문자 수
   - 이번 달 방문자 수
   - 실시간 방문자 수

### 상세 통계 보기

**"상세 보기"** 버튼 클릭 시:
- 일별 방문자 추이 그래프
- 시간대별 방문 패턴
- 인기 페이지 순위
- 유입 경로 분석

---

## 문제 해결

### 오류 1: PERMISSION_DENIED

**증상:**
```
오류: 권한이 없습니다 (PERMISSION_DENIED)
```

**원인:**
- 서비스 계정이 GA4에 추가되지 않음
- 역할이 "뷰어"가 아님
- 잘못된 GA4 속성에 추가함

**해결책:**

1. **서비스 계정 이메일 확인**
   - Google Analytics → 관리 → 속성 액세스 관리
   - 서비스 계정 이메일이 목록에 있는지 확인

2. **역할 확인**
   - 역할이 **"뷰어"**인지 확인
   - "뷰어"가 아니면 삭제 후 다시 추가

3. **Property ID 확인**
   - 입력한 Property ID와 권한을 추가한 GA4 속성이 동일한지 확인
   - 여러 GA4 속성이 있다면 혼동 주의

4. **5~10분 대기**
   - 권한 추가 후 Google 동기화에 시간 소요
   - 잠시 기다린 후 다시 시도

---

### 오류 2: JSON 파싱 오류

**증상:**
```
오류: JSON 형식이 올바르지 않습니다
```

**원인:**
- JSON 파일 내용이 손상됨
- 일부만 복사됨

**해결책:**
1. JSON 파일을 다시 메모장으로 열기
2. **전체 선택** (Ctrl + A)
3. **복사** (Ctrl + C)
4. 입력창에 **붙여넣기** (Ctrl + V)
5. 처음 `{`부터 마지막 `}`까지 모두 복사되었는지 확인

---

### 오류 3: 데이터가 안 나옴

**증상:**
- 설정은 성공했는데 대시보드에 데이터가 0

**원인:**
- 홈페이지에 GA4 스크립트 미설치
- 최근에 GA4를 만들어서 데이터가 아직 없음

**해결책:**

1. **홈페이지에 GA4 스크립트 설치 확인**
   - 홈페이지 소스 보기 (F12)
   - `gtag` 또는 `G-XXXXXXXXXX` 검색
   - 없으면 개발자에게 스크립트 설치 요청

2. **데이터 수집 대기**
   - GA4를 방금 만들었다면 24시간 대기
   - 방문자가 있어야 데이터가 쌓임

3. **테스트 방문**
   - 본인이 홈페이지 방문
   - Google Analytics → 보고서 → 실시간
   - 실시간 방문자 1명 표시되는지 확인

---

## FAQ

### Q1. GA4 연동에 비용이 드나요?

**A.** 아니요, 완전 무료입니다!
- Google Analytics 4: 무료
- Google Cloud 서비스 계정: 무료
- Analytics Data API 사용: 무료 (한도 내)

### Q2. 여러 웹사이트를 운영 중인데 모두 연동할 수 있나요?

**A.** 네, 가능합니다!
- 각 웹사이트마다 GA4 속성을 따로 만들어야 합니다
- 서비스 계정은 하나로 여러 GA4 속성에 권한 부여 가능

### Q3. 기존 Universal Analytics (UA)를 사용 중인데?

**A.** GA4로 전환이 필요합니다.
- Universal Analytics는 2023년 7월 1일부터 데이터 수집 중단
- GA4는 새로운 방식이므로 처음부터 설정해야 합니다

### Q4. 관리자 방문도 카운트되나요?

**A.** 아니요, 자동으로 제외됩니다.
- 로그인한 관리자의 활동은 GA4 추적에서 자동 제외
- 정확한 방문자 통계 확인 가능

### Q5. 실시간 데이터가 안 보여요

**A.** 다음을 확인하세요:
1. 설정 저장 후 5~10분 대기
2. 홈페이지에 GA4 스크립트 설치 확인
3. 테스트로 홈페이지 방문 후 확인

### Q6. Property ID와 Measurement ID를 헷갈려요

**A.** 차이점:
- **Property ID**: 숫자만 (예: 512483847)
  - 위치: 관리 → 속성 설정
- **Measurement ID**: G-로 시작 (예: G-XXXXXXXXXX)
  - 위치: 관리 → 데이터 스트림 → 웹 스트림

### Q7. JSON 파일을 분실했어요

**A.** 새로 발급받을 수 있습니다:
1. Google Cloud Console → 서비스 계정
2. 기존 서비스 계정 클릭
3. "키" 탭 → "키 추가" → "새 키 만들기"
4. JSON 선택 → 새 키 다운로드

### Q8. 서비스 계정 이메일을 GA4에 추가했는데 목록에 안 보여요

**A.** 올바른 위치를 확인하세요:
- ❌ 잘못: 계정 액세스 관리 (왼쪽 열)
- ✅ 정답: **속성 액세스 관리** (가운데 열)

### Q9. 대시보드에 표시되는 데이터는 정확한가요?

**A.** 네, Google Analytics의 공식 데이터입니다.
- 실시간 데이터: 약 1~5분 지연
- 일별 통계: 당일 데이터는 집계 중일 수 있음
- 완전한 통계는 익일 확인 권장

### Q10. GA4 설정을 삭제하고 싶어요

**A.** 시스템 설정 페이지에서:
- Property ID와 Measurement ID를 비우고 저장
- 또는 관리자에게 문의

---

## 💡 활용 팁

### 1. 정기적인 통계 확인
```
매일 아침: 어제 방문자 수 확인
매주 월요일: 지난주 추이 분석
매월 1일: 전월 대비 증감 확인
```

### 2. 인기 페이지 파악
- 어떤 매물이 가장 많이 조회되는지
- 어떤 지역이 관심이 높은지
- 그에 맞춰 매물 등록 전략 조정

### 3. 유입 경로 분석
- 검색 유입이 많다면: SEO 최적화 강화
- SNS 유입이 많다면: 소셜 마케팅 강화
- 직접 방문이 많다면: 브랜드 인지도 상승

### 4. 모바일 최적화
- 모바일 방문자 비율 확인
- 모바일 비율이 높다면 모바일 UX 개선

---

**관련 매뉴얼**
- [대시보드](../getting-started/dashboard) - 대시보드 전체 기능 안내
- [직원 관리](./staff) - 직원 권한 설정
- [2단계 인증](./2fa) - 보안 강화
